(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-395eb90b"],{"31ec":function(t,n,e){"use strict";e("b16f")},7662:function(t,n,e){t.exports=e.p+"h5/img/renew01.8fad419b.png"},b16f:function(t,n,e){},f946:function(t,n,e){"use strict";e.r(n);var i=function(){var t=this,n=t._self._c;return n("div",{staticClass:"set"},[n("van-nav-bar",{attrs:{title:t.$t("m.cool339"),fixed:"",border:!1,"left-arrow":""},on:{"click-left":t.onClickLeft}}),n("img",{staticStyle:{width:"100%"},attrs:{src:e("7662")}}),n("div",{staticStyle:{padding:"15px"}},[n("div",{staticClass:"flexbet"},[n("div",{staticStyle:{color:"#fff"}},[t._v("更新方式")]),n("van-radio-group",{attrs:{direction:"horizontal"},on:{change:t.changeradio},model:{value:t.radio,callback:function(n){t.radio=n},expression:"radio"}},[n("van-radio",{attrs:{name:1,"checked-color":"#ee0a24","icon-size":"14px"}},[t._v("自动更新")]),n("van-radio",{attrs:{name:2,"checked-color":"#ee0a24","icon-size":"14px"}},[t._v("手动更新")])],1)],1),n("div",{staticClass:"schedule"},[n("van-progress",{attrs:{percentage:t.percentage,"stroke-width":"8"}})],1),n("div",{staticClass:"renewbut",on:{click:t.empowers}},[n("van-icon",{attrs:{name:"flag-o",size:"16"}}),t._v(" 授权安装\n        ")],1),n("div",{staticClass:"renewbut",on:{click:t.download}},[n("van-icon",{attrs:{name:"down",size:"16"}}),t._v(" 下载更新\n        ")],1)]),n("div",{staticStyle:{height:"70px"}})],1)},o=[],a={data:function(){return{radio:1*localStorage.getItem("download"),size:0,hdown:0,percentage:0,remainingTime:0,countdownInterval:null,downloadTimer:null}},created:function(){},methods:{startCountdown:function(){var t=this;0===this.remainingTime&&(this.remainingTime=180,this.countdownInterval=setInterval((function(){t.remainingTime>0?t.remainingTime--:t.clearCountdown()}),1e3))},clearCountdown:function(){clearInterval(this.countdownInterval),this.remainingTime=0,this.countdownInterval=null},empowers:function(){try{window.Android.permission()}catch(t){}},download:function(){if(0==this.remainingTime){this.startCountdown();try{window.Android.download(),this.calculatedPercentage()}catch(t){}}},calculatedPercentage:function(){this.size=window.Android.size(),this.hdown=window.Android.hdown();var t=(this.hdown/this.size*100).toFixed(4);return parseFloat(t)},startDownload:function(){var t=this;this.downloadTimer=setInterval((function(){t.size==t.hdown&&t.stopDownload()}),1e3)},stopDownload:function(){clearInterval(this.downloadTimer)},changeradio:function(t){var n=this;localStorage.setItem("download",t),this.radio=t;try{1==t&&(console.log(111),setInterval((function(){n.download()}),6e5))}catch(e){}},onClickLeft:function(){"login"==this.$route.query.state?this.$router.push({path:"/login"}):this.$router.push({path:"/"})}},components:{}},r=a,s=(e("31ec"),e("2877")),c=Object(s["a"])(r,i,o,!1,null,"13a4b478",null);n["default"]=c.exports}}]);